var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o["throw"](t))}catch(e){r(e)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,r=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=e.call(t,c)}catch(o){n=[6,o],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Component=function(t){function e(){var e=t.call(this)||this;return e.percentWidth=e.percentHeight=100,e.setDefaultSkinName(),e}return __extends(e,t),e.prototype.setDefaultSkinName=function(){var t=egret.getQualifiedClassName(this);"Component"!==t&&(this.skinName="resource/skins/"+t.replace(".","/")+"Skin.exml")},e}(eui.Component);__reflect(Component.prototype,"Component");var common;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.visible=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.fadeOut,this)},e.prototype.show=function(){var t=this;window.NewsappShare?window.NewsappShare.show(function(){t.fadeIn(),setTimeout(function(){t.fadeOut()},2e3)}):(this.fadeIn(),setTimeout(function(){t.fadeOut()},2e3))},e.prototype.fadeIn=function(){this.visible=!0,this.alpha=0,egret.Tween.get(this,null,null,!0).to({alpha:1},300,egret.Ease.sineInOut)},e.prototype.fadeOut=function(){var t=this;egret.Tween.get(this,null,null,!0).to({alpha:0},300,egret.Ease.sineInOut).call(function(){t.visible=!1})},e}(Component);t.Share=e,__reflect(e.prototype,"common.Share")}(common||(common={})),window.common.Share=common.Share;var app;!function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.createChildren=function(){var n=this;e.prototype.createChildren.call(this),this.other.addEventListener(egret.Event.COMPLETE,function(){var t=new common.DragonBones;t.name="other",t.armatureName="loading",t.horizontalCenter=0,t.verticalCenter=-40,n.addChild(t)},this),this.preload.addEventListener(egret.Event.COMPLETE,function(){n.$router.replace(t.Home)},this)},n}(Component);t.Loading=e,__reflect(e.prototype,"app.Loading")}(app||(app={}));var common;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.src=null,e.autoplay=!1,e.control=!1,e.delayStop=0,e.isWeixin=/micromessenger/gi.test(navigator.userAgent),e.isWeixinHandled=!1,e}return __extends(e,t),e.prototype.createChildren=function(){var n=this;t.prototype.createChildren.call(this),this.control&&(this.currentState=e.muted?"off":"on",this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.muted=!e.muted,e.muted?(n.stop(),n.currentState="off"):(n.play(),n.currentState="on")},this)),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(){setTimeout(function(){n.stop()},n.delayStop)},this),this.sound=RES.getRes(this.src),this.autoplay&&this.play()},e.prototype.play=function(t,n){var o=this;e.muted||this.sound&&(this.isWeixin?this.weixinHandler(function(){o.soundChannel=o.sound.play(t,n)}):this.soundChannel=this.sound.play(t,n))},e.prototype.stop=function(){this.soundChannel&&(this.soundChannel.stop(),this.soundChannel=null)},e.prototype.loadScript=function(t,e){var n=this,o=document.createElement("script");o.src=t,o.onload=function(){e&&e.call(n),o.parentNode.removeChild(o)};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i)},e.prototype.weixinHandler=function(t){var e=this;if(this.isWeixinHandled)t.call(this);else{var n=function(){window.wx.config({}),window.wx.ready(function(){e.isWeixinHandled=!0,t.call(e)})};window.wx?n():this.loadScript("//res.wx.qq.com/open/js/jweixin-1.3.0.js",n)}},e.muted=!1,e}(eui.Component);t.Audio=e,__reflect(e.prototype,"common.Audio")}(common||(common={})),window.common.Audio=common.Audio;var common;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="",e.armatureName="",e.animationName="",e.autoPlay=!0,e.texCount=1,e.factory=dragonBones.EgretFactory.factory,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.parseData(),this.createDisplay()},e.prototype.parseData=function(){if(!this.factory.getDragonBonesData(this.name)){var t=RES.getRes(this.name+"_ske_json");if(this.factory.parseDragonBonesData(t,this.name),this.texCount>1)for(var e=0;e<this.texCount;e++){var n=RES.getRes(this.name+"_tex_"+e+"_json"),o=RES.getRes(this.name+"_tex_"+e+"_png");this.factory.parseTextureAtlasData(n,o,this.name)}else{var n=RES.getRes(this.name+"_tex_json"),o=RES.getRes(this.name+"_tex_png");this.factory.parseTextureAtlasData(n,o,this.name)}}},e.prototype.createDisplay=function(){var t=this;this.display=this.factory.buildArmatureDisplay(this.armatureName,this.name),this.display.addEventListener(dragonBones.EventObject.START,function(){t.dispatchEventWith(dragonBones.EventObject.START)},this),this.display.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,function(){t.dispatchEventWith(dragonBones.EventObject.LOOP_COMPLETE)},this),this.display.addEventListener(dragonBones.EventObject.COMPLETE,function(){t.dispatchEventWith(dragonBones.EventObject.COMPLETE)},this),this.addChild(this.display),this.autoPlay&&this.display.animation.play(this.animationName)},e.prototype.play=function(t){this.display&&this.display.animation.play(t||this.animationName)},e.prototype.setProgress=function(t){this.display&&this.display.animation.gotoAndStopByProgress(this.animationName,t)},e}(eui.Component);t.DragonBones=e,__reflect(e.prototype,"common.DragonBones")}(common||(common={})),window.common.DragonBones=common.DragonBones;var common;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.groupName="preload",e.priority=0,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),-1!=this.groupName.indexOf("-")&&this.createGroup(this.groupName),this.start()},e.prototype.createGroup=function(t){var e=[],n=t.split("-");n.forEach(function(t){var n=RES.getGroupByName(t);n.forEach(function(t){e.push(t.name)})}),RES.createGroup(t,e,!0)},e.prototype.start=function(){this.currentState="loading",RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onError,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onComplete,this),RES.loadGroup(this.groupName,this.priority)},e.prototype.onProgress=function(t){if(t.groupName==this.groupName){var e=Math.floor(t.itemsLoaded/t.itemsTotal*100);this.progress&&(this.progress.text=e+"%"),this.dispatchEventWith(egret.ProgressEvent.PROGRESS,!1,e)}},e.prototype.onError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onComplete(t)},e.prototype.onComplete=function(t){t.groupName==this.groupName&&this.end()},e.prototype.end=function(){this.currentState="loaded",RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onProgress,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onComplete,this),this.dispatchEventWith(egret.Event.COMPLETE)},e}(eui.Component);t.Preload=e,__reflect(e.prototype,"common.Preload")}(common||(common={})),window.common.Preload=common.Preload;var app;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioKeys=[5750,9520,19e3,21500,22280,25720,27600,30120,33420,39800,45560,1/0],e.audioPlayed=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],e.timeScale=2,e.frameFactor=6,e.totalFrames=4124,e.totalPrgress=e.totalFrames*e.frameFactor*e.timeScale,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.mainDB.setProgress(0),this.scrollBar.height=this.totalPrgress+this.stage.stageHeight,this.scroller.addEventListener(eui.UIEvent.CHANGE,this.onScroll,this),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.start,this),this.replayBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.replay,this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.share,this)},e.prototype.start=function(){var t=this;egret.Tween.get(this.cover).to({alpha:0},300,egret.Ease.sineInOut).call(function(){t.cover.visible=!1,t.mainDB.visible=!0})},e.prototype.stop=function(){this.end.visible=!0,this.endDB.play("enter")},e.prototype.onScroll=function(){var t=this.scroller.viewport.scrollV,e=t/this.totalPrgress;this.mainDB.setProgress(e);for(var n,o=0;o<=this.audioKeys.length-1;o++)if(t<this.audioKeys[o]){n=o-1;for(var i=o;i<this.audioPlayed.length;i++)this.audioPlayed[i]=!1;break}n>=0&&!this.audioPlayed[n]&&(this.audioPlayed[n]=!0,this["audio"+(n+1)].play(0,1)),1===e&&this.stop()},e.prototype.replay=function(){this.end.visible=!1,this.mainDB.setProgress(0),this.scroller.viewport.scrollV=0},e.prototype.share=function(){this.commonShare.show()},e}(Component);t.Home=e,__reflect(e.prototype,"app.Home")}(app||(app={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function o(o){e.call(n,o,t)}if(RES.hasRes(t)){var i=RES.getRes(t);i?o(i):RES.getResAsync(t,o,this)}else RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isConfigLoadEnd=!1,e.isThemeLoadEnd=!1,e}return __extends(e,t),e.prototype.createChildren=function(){var e=this;t.prototype.createChildren.call(this),this.scaleMode=this.stage.scaleMode,this.updateScaleMode(),window.addEventListener("resize",function(){e.updateScaleMode()}),this.stage.registerImplementation("eui.IAssetAdapter",new AssetAdapter),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/");var n=new eui.Theme("resource/default.thm.json",this.stage);n.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},e.prototype.updateScaleMode=function(){window.innerWidth<window.innerHeight?this.stage.scaleMode=this.scaleMode:0===window.orientation||180===window.orientation?this.stage.scaleMode=this.scaleMode:this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL},e.prototype.onConfigComplete=function(){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),this.isConfigLoadEnd=!0,this.createScene()},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},e.prototype.createScene=function(){this.isConfigLoadEnd&&this.isThemeLoadEnd&&(new Router(this).replace(app.Loading),window.NewsappShare&&window.NewsappShare.config({title:"这是一次令中国人振奋的穿越！",desc:"磨砺五年！这是一部中国人集体出演的视觉大片",imgUrl:"resource/statics/share-icon.png",link:""}))},e}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var Router=function(){function t(t){var e=this;this.context=t,window.addEventListener("popstate",function(t){t.state&&e.changeScene(egret.getDefinitionByName(t.state.sceneClassName),t.state.params)},!1)}return t.prototype.push=function(t,e){window.history&&window.history.pushState({sceneClassName:egret.getQualifiedClassName(t),params:e},document.title,location.href),this.changeScene(t,e)},t.prototype.replace=function(t,e){window.history&&window.history.replaceState({sceneClassName:egret.getQualifiedClassName(t),params:e},document.title,location.href),this.changeScene(t,e)},t.prototype.changeScene=function(t,e){var n=new t(e);n.$router=this,this.context.removeChildren(),this.context.addChild(n)},t}();__reflect(Router.prototype,"Router");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,o){function i(t){e.call(o,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),n.call(o))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(o,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var utils;!function(t){var e=function(){function t(){}return t.trackView=function(t){window.neteaseAnalysis&&window.neteaseAnalysis({type:"special",modelid:window._ntes_sps_modelid,view:t,spst:5}),window.NTESAntAnalysis&&window.NTESAntAnalysis.sendData({projectid:window._ntes_ant_projectid,val_nm:"pageview",val_act:t}),window._hmt&&window._hmt.push(["_trackPageview",window.location.pathname.replace("index.html",t+".html")])},t.trackEvent=function(t,e){e=e||"click",window.neteaseAnalysis&&window.neteaseAnalysis({type:"func",modelid:window._ntes_sps_modelid,action:e,event:t,spst:5}),window.NTESAntAnalysis&&window.NTESAntAnalysis.sendData({projectid:window._ntes_ant_projectid,val_nm:e,val_act:t}),window._hmt&&window._hmt.push(["_trackEvent",e,t])},t}();t.Stat=e,__reflect(e.prototype,"utils.Stat")}(utils||(utils={}));